<div class="row" style="padding-top: 5px">
  <div class="col-xs-12 col-sm-3 col-lg-3">
    <div style="float: right">
      <span class="h6">{{budgetItem.category.name}}</span>
      <button class="btn-text btn-default btn-sm" ng-if="budgetItem.children.length > 0" ng-init="budgetItem.$$hideRows=true" ng-click="budgetItem.$$hideRows = !budgetItem.$$hideRows" tooltip="{{getTooltip(budgetItem)}}">
          <span class="fa" ng-class="{ 'fa fa-chevron-right': budgetItem.$$hideRows, 'fa fa-chevron-down': !budgetItem.$$hideRows }"></span>
      </button>

    </div>
  </div>

  <div class="col-xs-12 col-sm-9 col-lg-9">
   <div class="shadedrow">
  	<div class="row">
      <div class="col-xs-4 col-sm-4 col-lg-4">
        <span class="h6" style="float: left">{{budgetItem.amount | number : 2}}</span>
      </div>

  		<div class="col-xs-4 col-sm-4 col-lg-4" style="text-align: center">
  		  <span class="h6">{{budgetItem.spent | number : 2}}</span>
      </div>

      <div class="col-xs-4 col-sm-4 col-lg-4" style="text-align: right">
        <span ng-if="budgetItem.spent > budgetItem.amount" class="h6 expense" style="text-align: center">{{budgetItem.amount - budgetItem.spent | number : 2}}</span>
        <span ng-if="budgetItem.spent <= budgetItem.amount" class="h6 income" style="text-align: center">{{budgetItem.amount - budgetItem.spent | number : 2}}</span>
      </div>
  	</div>

    <div class="progress">
      <div ng-if="budgetItem.amount > 0" ng-init="percent=budgetItem.spent / budgetItem.amount * 100" class="progress-bar progress-bar-danger progress-bar-striped active" style="width: {{percent}}%" aria-valuenow="{{percent}}%">
      </div>
      <div ng-if="budgetItem.amount <= 0" ng-init="percent=100" class="progress-bar progress-bar-danger progress-bar-striped active" style="width: {{percent}}%" aria-valuenow="{{percent}}%">
      </div>

      <div ng-if="budgetItem.amount > 0" ng-init="percent=100 - ((budgetItem.spent / budgetItem.amount) * 100)" class="progress-bar progress-bar-success progress-bar-striped active" style="width: {{percent}}%" aria-valuenow="{{percent}}%">
      </div>
		</div>

    <div style="padding-top: 10px" ng-hide="budgetItem.$$hideRows" ng-repeat="child in budgetItem.children">
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-lg-12">
          <span class="h6"><b>{{child.category.name}}</b></span>
        </div>
      </div>
     <div class="row">
      <div class="col-xs-4 col-sm-4 col-lg-4">
        <span class="h6">{{child.amount | number : 2}}</span>
      </div>

      <div class="col-xs-4 col-sm-4 col-lg-4" style="text-align: center">
        <span class="h6">{{child.spent | number : 2}}</span>
      </div>

      <div class="col-xs-4 col-sm-4 col-lg-4" style="text-align: right">
        <span ng-if="child.spent > child.amount" class="h6 expense" style="text-align: center">{{child.amount - child.spent | number : 2}}</span>
        <span ng-if="child.spent <= child.amount" class="h6 income" style="text-align: center">{{child.amount - child.spent | number : 2}}</span>

      </div>
     </div>
     <div class="progress">
       <div ng-if="child.amount > 0" ng-init="percent=child.spent / child.amount * 100" class="progress-bar progress-bar-danger progress-bar-striped active" style="width: {{percent}}%" aria-valuenow="{{percent}}%">
       </div>
       <div ng-if="child.amount <= 0" ng-init="percent=100" class="progress-bar progress-bar-danger progress-bar-striped active" style="width: {{percent}}%" aria-valuenow="{{percent}}%">
       </div>

       <div ng-if="child.amount > 0" ng-init="percent=100 - ((child.spent / child.amount) * 100)" class="progress-bar progress-bar-success progress-bar-striped active" style="width: {{percent}}%" aria-valuenow="{{percent}}%">
       </div>
      </div>
     </div>
    </div>
  </div>
</div>
